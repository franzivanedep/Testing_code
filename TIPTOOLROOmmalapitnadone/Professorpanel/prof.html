<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professor's Transactions</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Professor's Transactions</h1>
    </header>
    <main>
        <section id="transactions">
            <h2>Transactions:</h2>
            <ul id="transactionsList"></ul>
        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Retrieve the faculty ID from localStorage
            const professorID = localStorage.getItem('facultyID');

            if (!professorID) {
                // Handle the case where professorID is not available
                console.error('Professor ID not found in localStorage.');
                return;
            }

            // Make an AJAX request to get the professor's transactions
            $.ajax({
                url: '/TIPTOOLROOmmalapitnadone/student/PHP/get_transact.php?professor_id=' + professorID,
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    const transactionsList = $('#transactionsList');

                    if (data.error) {
                        // Handle the case where an error occurred
                        console.error('Error: ' + data.error);
                        transactionsList.html('<li>Error fetching transactions.</li>');
                    } else if (data.transactions.length === 0) {
                        transactionsList.html('<li>No transactions found.</li>');
                    } else {
                        const transactionHTML = data.transactions.map(function (transaction) {
                            return `<li>Student: ${transaction.studentname} - Course: ${transaction.courses} - Date: ${transaction.sdate} - Item: ${transaction.item} - Quantity: ${transaction.quantity}</li>`;
                        }).join('');

                        transactionsList.html(transactionHTML);
                    }
                },
                error: function (error) {
                    console.log('Error: ' + JSON.stringify(error));
                }
            });
        });
    </script>
</body>
</html>
